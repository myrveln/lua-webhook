# Webhook Configuration
# Include this file inside an existing server {} block in your nginx.conf
# Example:
#   server {
#       listen 80;
#       server_name yourdomain.com;
#
#       include /path/to/webhook/examples/nginx-example.conf;
#   }

# Finding webhook.lua:
# - If installed via LuaRocks, run: luarocks which webhook
#   (OpenResty usually uses LuaJIT/Lua 5.1, so run it in the same LuaRocks env).
# - Use that path in the content_by_lua_file directives below.
#
# Example output path:
#   /usr/local/share/lua/5.1/webhook.lua

# Webhook endpoint
# WebSocket endpoint (streams events). Exact match keeps it isolated from
# REST-only directives like default_type / request-body handling.
location = /webhook/_ws {
    # Update this path to your webhook.lua location
    content_by_lua_file /path/to/webhook/webhook.lua;
}

location ~ ^/webhook(/.*)?$ {
    lua_need_request_body on;
    client_max_body_size 2M;
    default_type 'application/json';

    # Update this path to your webhook.lua location
    content_by_lua_file /path/to/webhook/webhook.lua;
}
